/**!
© 2017 Convergence Labs, Inc.
@version 0.3.4
@license MIT
*/
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("Convergence")):"function"==typeof define&&define.amd?define("ConvergenceInputElementBinder",["Convergence"],t):"object"==typeof exports?exports.ConvergenceInputElementBinder=t(require("Convergence")):e.ConvergenceInputElementBinder=t(e.Convergence)}(this,function(e){return function(e){function t(r){if(n[r])return n[r].exports;var o=n[r]={exports:{},id:r,loaded:!1};return e[r].call(o.exports,o,o.exports,t),o.loaded=!0,o.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(1);Object.keys(r).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return r[e]}})});var o=n(5);Object.keys(o).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return o[e]}})})},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.TextInputProcessor=void 0;var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(2),a=n(3),l=r(a);t.TextInputProcessor=function(){function e(t){o(this,e);var n=(0,u.resolveElement)(t.element);if(n instanceof HTMLInputElement){if("text"!==n.type&&"url"!==n.type&&"tel"!==n.type&&"search"!==n.type&&"password"!==n.type)throw new Error("HTMLInputElement must of of type 'text', 'url', 'tel', or 'search': "+n.type)}else if(!(n instanceof HTMLTextAreaElement))throw new Error("Input element must either an HTMLTextInput or a HTMLTextArea.");this._input=n,this._event=t.event||"input",this._detector=new l.default({value:this._input.value,onInsert:t.onInsert,onRemove:t.onRemove}),this._listener=this._onEvent.bind(this),this.bind()}return i(e,[{key:"bind",value:function(){this._input.addEventListener(this._event,this._listener)}},{key:"unbind",value:function(){this._input.removeEventListener(this._event,this._listener)}},{key:"insertText",value:function(e,t){this._detector.insertText(e,t),this._input.value=this._detector.getValue()}},{key:"removeText",value:function(e,t){this._detector.removeText(e,t),this._input.value=this._detector.getValue()}},{key:"setValue",value:function(e){this._input.value=e,this._detector.setValue(e)}},{key:"_onEvent",value:function(){this._detector.processNewValue(this._input.value)}}]),e}()},function(e,t){"use strict";function n(e){if(e instanceof HTMLElement)return e;if("string"==typeof e){var t=document.getElementById(e);if(void 0===t)throw new ReferenceError("An element with id '"+e+"' could not be found.");return t}throw new Error("The supplied argument must be an HTMLElement or a string representing an element id.")}Object.defineProperty(t,"__esModule",{value:!0}),t.resolveElement=n},function(e,t,n){/**!
	© 2017 Convergence Labs, Inc.
	@version 0.1.1
	@license MIT
	*/
"use strict";e.exports=n(4)},function(e,t){/**!
	© 2017 Convergence Labs, Inc.
	@version 0.1.1
	@license MIT
	*/
"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=function(){function e(t){if(n(this,e),!t)throw new Error("options must be defined");if("function"!=typeof t.onInsert)throw new Error("options.onInsert must be a function");if("function"!=typeof t.onRemove)throw new Error("options.onRemove must be a function");if("string"!=typeof t.value)throw new Error("options.value must be a string");this._onInsert=t.onInsert,this._onRemove=t.onRemove,this._value=t.value}return r(e,[{key:"insertText",value:function(e,t){var n=this._value,r=n.substring(0,e)+t+n.substring(e,n.length);this.setValue(r)}},{key:"removeText",value:function(e,t){var n=this._value,r=n.substring(0,e)+n.substring(e+t,n.length);this.setValue(r)}},{key:"setValue",value:function(e){this._value=e}},{key:"getValue",value:function(){return this._value}},{key:"processNewValue",value:function(e){var t=0,n=0;if(this._value!==e){for(;this._value.charAt(n)===e.charAt(n);)n++;for(;this._value.charAt(this._value.length-1-t)===e.charAt(e.length-1-t)&&t+n<this._value.length&&t+n<e.length;)t++;this._value.length!==n+t&&this._onRemove&&this._onRemove(n,this._value.length-n-t),e.length!==n+t&&this._onInsert&&this._onInsert(n,e.slice(n,e.length-t)),this._value=e}}}]),e}();t.default=o,e.exports=t.default},function(e,t,n){"use strict";function r(e,t){var n=(0,c.resolveElement)(e);n.value=t.value();var r=new f.TextInputProcessor({element:n,event:"input",onInsert:function(e,n){return t.insert(e,n)},onRemove:function(e,n){return t.remove(e,n)}}),o=function(e){if(!e.local){var t=d.TextInputUtils.getTextSelection(n);r.insertText(e.index,e.value);var o=d.TextInputUtils.transformSelection(t,e);d.TextInputUtils.setTextSelection(o,n)}};t.on(m.RealTimeString.Events.INSERT,o);var i=function(e){if(!e.local){var t=d.TextInputUtils.getTextSelection(n);r.removeText(e.index,e.value.length);var o=d.TextInputUtils.transformSelection(t,e);d.TextInputUtils.setTextSelection(o,n)}};t.on(m.RealTimeString.Events.REMOVE,i);var u=function(e){e.local||r.setValue(e.value)};t.on(m.RealTimeString.Events.VALUE,u);var a=function(){r.unbind(),t.off(m.RealTimeString.Events.INSERT,o),t.off(m.RealTimeString.Events.REMOVE,i),t.off(m.RealTimeString.Events.VALUE,u)};return t.on(m.RealTimeString.Events.DETACHED,a),{unbind:a}}function o(e,t){var n=(0,c.resolveElement)(e);n.value=t.value();var r=function(n){return t.value(Number(e.value))};n.addEventListener("input",r,!1);var o=function(t){t.local||(e.value=t.element.value())};t.on(m.RealTimeNumber.Events.VALUE,o);var i=function(t){t.local||(e.value=Number(e.value)+t.value)};t.on(m.RealTimeNumber.Events.DELTA,i);var u=function(){n.removeEventListener("input",r),t.off(m.RealTimeNumber.Events.VALUE,o),t.off(m.RealTimeNumber.Events.DELTA,i)};return t.on(m.RealTimeNumber.Events.DETACHED,u),{unbind:u}}function i(e,t){var n=(0,c.resolveElement)(e);n.checked=t.value();var r=function(e){return t.value(n.checked)};e.addEventListener("change",r,!1);var o=function(t){t.local||(e.checked=t.element.value())};t.on(m.RealTimeBoolean.Events.VALUE,o);var i=function(){e.removeEventListener("change",r),t.off(m.RealTimeBoolean.Events.VALUE,o)};return t.on(m.RealTimeNumber.Events.DETACHED,i),{unbind:i}}function u(e,t){return o(e,t)}function a(e,t){var n=(0,c.resolveElement)(e);n.value=t.value();var r=function(n){return t.value(e.value)};n.addEventListener("input",r,!1);var o=function(t){t.local||(e.value=t.element.value())};t.on(m.RealTimeNumber.Events.VALUE,o);var i=function(){n.removeEventListener("input",r),t.off(m.RealTimeNumber.Events.VALUE,o)};return t.on(m.RealTimeNumber.Events.DETACHED,i),{unbind:i}}function l(e,t){var n=(0,c.resolveElement)(e);n.value=t.value();var r=function(n){return t.value(e.value)};n.addEventListener("input",r,!1);var o=function(t){t.local||(e.value=t.element.value())};t.on(m.RealTimeNumber.Events.VALUE,o);var i=function(){n.removeEventListener("input",r),t.off(m.RealTimeNumber.Events.VALUE,o)};return t.on(m.RealTimeNumber.Events.DETACHED,i),{unbind:i}}function s(e,t){var n=(0,c.resolveElement)(e),r=function(){for(var n=t.value(),r=0;r<e.options.length;r++){var o=e.options[r];o.selected=n.indexOf(o.value)>=0}};r();var o=function(n){for(var r=[],o=0;o<e.options.length;o++){var i=e.options[o];i.selected&&r.push(i.value)}t.value(r)};n.addEventListener("input",o,!1);var i=function(e){e.local||r()};t.on(m.RealTimeNumber.Events.VALUE,i);var u=function(){n.removeEventListener("input",o),t.off(m.RealTimeNumber.Events.VALUE,i)};return t.on(m.RealTimeNumber.Events.DETACHED,u),{unbind:u}}function v(e,t){var n=e.map(function(e){return(0,c.resolveElement)(e)}),r=function(){var n=t.value();e.forEach(function(e){return e.checked=e.value===n})};r();var o=function(n){var r=!1;e.forEach(function(e){e.checked&&(t.value(e.value),r=!0)}),r||t.value("")};n.forEach(function(e){return e.addEventListener("change",o,!1)});var i=function(e){e.local||r()};t.on(m.RealTimeNumber.Events.VALUE,i);var u=function(){n.forEach(function(e){return e.removeEventListener("change",o,!1)}),t.off(m.RealTimeNumber.Events.VALUE,i)};return t.on(m.RealTimeNumber.Events.DETACHED,u),{unbind:u}}Object.defineProperty(t,"__esModule",{value:!0}),t.bindTextInput=r,t.bindNumberInput=o,t.bindCheckboxInput=i,t.bindRangeInput=u,t.bindColorInput=a,t.bindSingleSelect=l,t.bindMultiSelect=s,t.bindRadioInputs=v;var c=n(2),f=n(1),m=n(6),d=n(7)},function(t,n){t.exports=e},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.TextInputUtils=void 0;var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(6);t.TextInputUtils=function(){function e(){r(this,e)}return o(e,null,[{key:"getTextSelection",value:function(e){if(document.selection){var t=document.selection.createRange(),n=t.text.length;t.moveStart("character",-e.value.length);var r=t.text.length-n;return{start:r,end:r+n}}return e.selectionStart||0===Number(e.selectionStart)?{start:e.selectionStart,end:e.selectionEnd}:{start:0,end:0}}},{key:"setTextSelection",value:function(e,t){var n=e.start,r=e.end;if(t.setSelectionRange)t.focus(),t.setSelectionRange(n,r);else if(t.createTextRange){var o=t.createTextRange();o.collapse(!0),o.moveEnd("character",r),o.moveStart("character",n),o.select()}}},{key:"transformSelection",value:function(t,n){return{start:e.transformIndex(t.start,n),end:e.transformIndex(t.end,n)}}},{key:"transformIndex",value:function(e,t){if(t instanceof i.StringInsertEvent)return t.index<=e?e+t.value.length:e;if(t instanceof i.StringRemoveEvent){var n=t.index,r=t.value.length;return e>n?e-Math.min(e-n,r):e}throw new Error("Invalid operation type")}}]),e}()}])});
//# sourceMappingURL=convergence-input-element-bindings.min.js.map
